<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Joan Llompart - Electrical Engineer Portfolio showcasing innovative projects and skills in hardware, software, and design">
    <title>Joan Llompart | Electrical Engineer Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            overflow-x: hidden;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e6e6e6;
            /* Added for scrollbar consistency */
            scrollbar-width: thin;
            scrollbar-color: rgba(128, 90, 213, 0.5) rgba(26, 26, 46, 0.8); /* thumb track */
        }
        body::-webkit-scrollbar {
            width: 8px;
        }
        body::-webkit-scrollbar-track {
            background: rgba(26, 26, 46, 0.8);
        }
        body::-webkit-scrollbar-thumb {
            background-color: rgba(128, 90, 213, 0.5);
            border-radius: 10px;
            border: 2px solid rgba(26, 26, 46, 0.8);
        }


        .floating {
            animation: floating 6s ease-in-out infinite;
        }

        @keyframes floating {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); } /* Reduced float height slightly */
            100% { transform: translateY(0px); }
        }

        .project-card {
            backdrop-filter: blur(10px);
            background: rgba(255, 255, 255, 0.08); /* Slightly less bright */
            border: 1px solid rgba(255, 255, 255, 0.15);
            transition: all 0.3s ease;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.12);
        }

        .text-gradient {
            background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        #canvas-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .skill-badge { /* Base style for skill badges on project cards */
            transition: all 0.3s ease;
        }

        .skill-badge:hover {
            transform: scale(1.1);
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85); /* Slightly darker backdrop */
            z-index: 1000;
            overflow-y: auto;
            padding-top: 5vh; /* Add some padding */
            padding-bottom: 5vh;
        }

        .modal-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            margin: 0 auto 5% auto; /* Adjust margin for padding */
            padding: 30px;
            border-radius: 12px;
            max-width: 800px;
            width: 90%;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            font-size: 28px; /* Larger close button */
            cursor: pointer;
            color: #fc00ff;
            transition: color 0.3s ease;
        }
        .close-modal:hover {
            color: #ff80ff; /* Lighter pink on hover */
        }

        /* Carousel styles */
        .carousel {
            position: relative;
            width: 100%;
            height: 400px; /* Maintain height */
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease;
            height: 100%;
        }

        .carousel-item {
            min-width: 100%;
            height: 100%;
        }

        .carousel-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Add a slight overlay for text visibility if needed later */
            /* filter: brightness(0.9); */
        }

        .carousel-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.6); /* Slightly more opaque */
            color: white;
            border: none;
            padding: 10px 15px;
            cursor: pointer;
            border-radius: 50%;
            z-index: 10;
            transition: background 0.3s ease;
        }
        .carousel-control:hover {
            background: rgba(0, 0, 0, 0.8);
        }

        .carousel-control.prev { left: 15px; }
        .carousel-control.next { right: 15px; }

        .carousel-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 8px;
            z-index: 10;
        }

        .carousel-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: background 0.3s;
        }

        .carousel-indicator.active {
            background: #fc00ff;
        }

        /* Styles for the integrated skills section */
        .skill-filter {
            transition: all 0.3s ease;
            border: 1px solid #805ad5; /* Purple border */
        }
        .skill-filter:hover {
            background-color: #805ad5; /* Purple hover */
            color: white;
        }
        .skill-filter.active {
            background-color: #fc00ff; /* Active pink */
            border-color: #fc00ff;
            color: white;
        }

        /* Base style for skill items in the list */
        .skill-item {
            transition: transform 0.3s ease, opacity 0.5s ease, box-shadow 0.3s ease;
            cursor: default; /* Indicate they are not clickable like filter buttons */
        }
        /* Add category colors using data attributes (Tailwind classes applied in HTML) */
        /* We use Tailwind classes directly now */

        /* For the entrance animation */
        .skill-item.hidden {
            opacity: 0 !important;
            transform: scale(0.8) !important; /* Example different hide animation */
            pointer-events: none;
            width: 0; /* Collapse when hidden */
            padding-left: 0;
            padding-right: 0;
            margin-left: -10px; /* Adjust margin to prevent jump */
            overflow: hidden;
        }

    </style>
</head>
<body class="text-gray-200"> <div id="canvas-container"></div>

    <nav class="fixed w-full z-50 backdrop-blur-md bg-opacity-70 bg-gray-900 shadow-lg"> <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <span class="text-xl font-bold text-gradient">J. LLOMPART</span>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#about" class="px-3 py-2 rounded-md text-sm font-medium hover:text-purple-300 transition">About</a>
                        <a href="#projects" class="px-3 py-2 rounded-md text-sm font-medium hover:text-purple-300 transition">Projects</a>
                        <a href="#skills" class="px-3 py-2 rounded-md text-sm font-medium hover:text-purple-300 transition">Skills</a>
                        <a href="#contact" class="px-3 py-2 rounded-md text-sm font-medium hover:text-purple-300 transition">Contact</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-300 hover:text-white focus:outline-none focus:text-white">
                      <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
                      </svg>
                    </button>
                 </div>
            </div>
        </div>
         <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#about" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">About</a>
                <a href="#projects" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Projects</a>
                <a href="#skills" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Skills</a>
                <a href="#contact" class="block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700">Contact</a>
            </div>
        </div>
    </nav>

    <section id="home" class="min-h-screen flex items-center justify-center px-4 sm:px-6 lg:px-8 pt-20">
        <div class="text-center max-w-4xl mx-auto">
             <img src="docs/assets/img/Project photos/IMG_8352.jpeg" alt="Joan Llompart" class="w-48 h-48 md:w-60 md:h-60 rounded-full mx-auto mb-8 border-4 border-purple-500 shadow-lg floating" loading="lazy"/>
            <h1 class="text-5xl md:text-7xl font-bold mb-4 text-gradient">Joan Llompart</h1>
            <h2 class="text-2xl md:text-3xl mb-6 text-purple-300">Electrical Engineer</h2>
             <p class="text-lg md:text-xl mb-8 text-gray-300">Bridging hardware and software with innovative electrical engineering solutions.</p>
            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                <a href="#projects" class="px-8 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full font-medium hover:opacity-90 transition duration-300">View Projects</a>
                <a href="#contact" class="px-8 py-3 border border-purple-400 rounded-full font-medium hover:bg-purple-900 hover:bg-opacity-40 transition duration-300">Contact Me</a>
            </div>
            <div class="social-links flex justify-center gap-6 mt-10">
                <a href="https://linkedin.com/in/jllb" target="_blank" rel="noopener noreferrer" aria-label="View Joan Llompart's LinkedIn profile" class="text-gray-400 hover:text-purple-400 transition duration-300 text-2xl"><i class="fab fa-linkedin"></i></a>
                <a href="https://github.com/llompi" target="_blank" rel="noopener noreferrer" aria-label="Explore Joan Llompart's GitHub projects" class="text-gray-400 hover:text-purple-400 transition duration-300 text-2xl"><i class="fab fa-github"></i></a>
                </div>
        </div>
    </section>

    <section id="about" class="py-24 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto"> <div class="flex flex-col md:flex-row items-center gap-12 md:gap-16">
            <div class="md:w-1/2 mb-10 md:mb-0 md:pr-10 text-center md:text-left">
                <h2 class="text-4xl font-bold mb-6 text-gradient">About Me</h2>
                <p class="text-lg mb-6 text-gray-300">I'm an electrical engineer with a passion for creating innovative solutions that bridge the gap between hardware and software. With experience in PCB design, IoT development, and product commercialization, I thrive on turning complex ideas into practical, user-friendly products.</p>
                <h3 class="text-2xl font-semibold mb-4 text-purple-300 mt-8">Interests</h3>
                <p class="text-lg mb-6 text-gray-300"><i class="fas fa-running mr-1"></i> Running | <i class="fas fa-table-tennis ml-2 mr-1"></i> Racquetball | <i class="fas fa-walking ml-2 mr-1"></i> Walks with my wife and dogs | <i class="fas fa-code ml-2 mr-1"></i> Programming | <i class="fas fa-gamepad ml-2 mr-1"></i> Gaming</p>
                <h3 class="text-2xl font-semibold mb-4 text-purple-300 mt-8">Languages</h3>
                <p class="text-lg mb-6 text-gray-300"><i class="fas fa-language mr-1"></i> English | Spanish | Catalan</p>

                <div class="flex justify-center md:justify-start space-x-8 mt-10">
                    <div class="text-center">
                        <div class="text-3xl font-bold text-purple-400">50+</div>
                        <div class="text-gray-400">Projects</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-purple-400">12</div>
                        <div class="text-gray-400">Patents</div>
                    </div>
                    <div class="text-center">
                        <div class="text-3xl font-bold text-purple-400">8+</div>
                        <div class="text-gray-400">Years Experience</div>
                    </div>
                </div>
            </div>
            <div class="md:w-1/2 relative">
                 <div class="floating">
                    <div class="w-full h-80 md:h-96 bg-gradient-to-br from-purple-900 via-blue-900 to-gray-900 rounded-2xl shadow-2xl flex items-center justify-center p-8">
                         <div class="text-center">
                            <i class="fas fa-microchip text-7xl md:text-8xl text-purple-300 mb-4 opacity-80"></i>
                            <h3 class="text-xl md:text-2xl font-bold text-gray-200">Hardware & Software Integration</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="projects" class="py-24 px-4 sm:px-6 lg:px-8 bg-gray-900 bg-opacity-60"> <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl font-bold mb-16 text-center text-gradient">Featured Projects</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10"> <div class="project-card rounded-xl p-6 floating" style="animation-delay: 0s;" onclick="openProjectModal('project1')">
                    <div class="h-48 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg mb-4 flex items-center justify-center overflow-hidden">
                         <img src="docs/assets/img/Project photos/RFAmp.jpg" alt="RF Amplifier Preview" class="w-full h-full object-cover">
                         </div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">RF Amplifier</h3>
                    <p class="text-gray-300 mb-4 text-sm md:text-base">High-fidelity RF amplifier for communication systems, involving circuit simulation and PCB design.</p>
                    <div class="flex flex-wrap gap-2 mt-auto"> <span class="skill-badge px-3 py-1 bg-red-800 bg-opacity-70 rounded-full text-xs md:text-sm">Hardware</span>
                        <span class="skill-badge px-3 py-1 bg-blue-800 bg-opacity-70 rounded-full text-xs md:text-sm">PCB Design</span>
                        <span class="skill-badge px-3 py-1 bg-yellow-800 bg-opacity-70 rounded-full text-xs md:text-sm">Simulation</span>
                    </div>
                </div>

                <div class="project-card rounded-xl p-6 floating" style="animation-delay: 0.3s;" onclick="openProjectModal('project2')">
                     <div class="h-48 bg-gradient-to-r from-blue-500 to-cyan-500 rounded-lg mb-4 flex items-center justify-center overflow-hidden">
                        <img src="docs/assets/img/Project photos/RetropieFront.jpg" alt="Handheld Console Preview" class="w-full h-full object-cover">
                        </div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">Raspberry Pi Handheld Console</h3>
                    <p class="text-gray-300 mb-4 text-sm md:text-base">Custom-built handheld console using Raspberry Pi for retro gaming. Skills: embedded systems, circuit design, 3D printing.</p>
                     <div class="flex flex-wrap gap-2 mt-auto">
                        <span class="skill-badge px-3 py-1 bg-red-800 bg-opacity-70 rounded-full text-xs md:text-sm">Hardware</span>
                        <span class="skill-badge px-3 py-1 bg-cyan-800 bg-opacity-70 rounded-full text-xs md:text-sm">Software</span>
                        <span class="skill-badge px-3 py-1 bg-green-800 bg-opacity-70 rounded-full text-xs md:text-sm">Embedded Systems</span>
                        <span class="skill-badge px-3 py-1 bg-blue-800 bg-opacity-70 rounded-full text-xs md:text-sm">3D Printing</span>
                    </div>
                </div>

                <div class="project-card rounded-xl p-6 floating" style="animation-delay: 0.6s;" onclick="openProjectModal('project3')">
                     <div class="h-48 bg-gradient-to-r from-green-500 to-lime-500 rounded-lg mb-4 flex items-center justify-center overflow-hidden">
                        <img src="docs/assets/img/Project photos/dogTreatDispenser.png" alt="Dog Treat Dispenser Preview" class="w-full h-full object-contain p-4"> </div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">IoT Dog Treat Dispenser</h3>
                    <p class="text-gray-300 mb-4 text-sm md:text-base">Smart dispenser rewarding pets automatically or via remote control. Showcases IoT development and mechanical design.</p>
                    <div class="flex flex-wrap gap-2 mt-auto">
                        <span class="skill-badge px-3 py-1 bg-cyan-800 bg-opacity-70 rounded-full text-xs md:text-sm">IoT</span>
                        <span class="skill-badge px-3 py-1 bg-red-800 bg-opacity-70 rounded-full text-xs md:text-sm">Hardware</span>
                        <span class="skill-badge px-3 py-1 bg-blue-800 bg-opacity-70 rounded-full text-xs md:text-sm">Mechanical Design</span>
                    </div>
                </div>
            </div>

            <div class="mt-20 mb-12 relative h-96 md:h-[500px] project-card p-1 rounded-2xl overflow-hidden"> <div id="project-model-1" class="w-full h-full rounded-xl overflow-hidden bg-gradient-to-br from-gray-800 to-gray-900"></div> <div class="absolute bottom-0 left-0 right-0 p-4 md:p-6 bg-black bg-opacity-70 backdrop-blur-sm">
                    <h3 class="text-lg md:text-xl font-bold">Interactive 3D Model: Robotic Arm</h3>
                    <p class="text-gray-300 text-sm md:text-base">Drag to rotate, scroll to zoom. Example assembly concept.</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10 mt-10">
                <div class="project-card rounded-xl p-6 floating" style="animation-delay: 0s;" onclick="openProjectModal('project4')">
                    <div class="h-48 bg-gradient-to-r from-yellow-500 to-amber-500 rounded-lg mb-4 flex items-center justify-center overflow-hidden">
                         <img src="docs/assets/img/Project photos/ebike1.jpg" alt="E-Bike Retrofit Preview" class="w-full h-full object-cover">
                    </div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">Electric Bike Retrofit</h3>
                    <p class="text-gray-300 mb-4 text-sm md:text-base">Senior project retrofitting an e-bike with electric braking, highlighting motor design and testing.</p>
                    <div class="flex flex-wrap gap-2 mt-auto">
                        <span class="skill-badge px-3 py-1 bg-yellow-800 bg-opacity-70 rounded-full text-xs md:text-sm">Engineering</span>
                        <span class="skill-badge px-3 py-1 bg-red-800 bg-opacity-70 rounded-full text-xs md:text-sm">Motors</span>
                        <span class="skill-badge px-3 py-1 bg-green-800 bg-opacity-70 rounded-full text-xs md:text-sm">Testing</span>
                    </div>
                </div>
                <div class="project-card rounded-xl p-6 floating" style="animation-delay: 0.3s;" onclick="openProjectModal('project5')">
                    <div class="h-48 bg-gradient-to-r from-indigo-500 to-purple-500 rounded-lg mb-4 flex items-center justify-center overflow-hidden">
                        <img src="docs/assets/img/Project photos/flexiPCB.jpg" alt="Flexible PCB Preview" class="w-full h-full object-cover">
                    </div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">Flexible PCB Design</h3>
                    <p class="text-gray-300 mb-4 text-sm md:text-base">Exploration into the design and implementation of flexible printed circuit boards for novel applications.</p>
                    <div class="flex flex-wrap gap-2 mt-auto">
                        <span class="skill-badge px-3 py-1 bg-blue-800 bg-opacity-70 rounded-full text-xs md:text-sm">PCB Design</span>
                         <span class="skill-badge px-3 py-1 bg-purple-800 bg-opacity-70 rounded-full text-xs md:text-sm">Advanced Materials</span>
                        <span class="skill-badge px-3 py-1 bg-red-800 bg-opacity-70 rounded-full text-xs md:text-sm">Hardware</span>
                    </div>
                </div>
                 <div class="project-card rounded-xl p-6 floating" style="animation-delay: 0.6s;" onclick="/* openProjectModal('project6') */ alert('More project details coming soon!');">
                    <div class="h-48 bg-gradient-to-r from-teal-500 to-emerald-500 rounded-lg mb-4 flex items-center justify-center">
                         <i class="fas fa-plus text-6xl text-white opacity-70"></i>
                    </div>
                    <h3 class="text-xl md:text-2xl font-bold mb-2">Future Project</h3>
                    <p class="text-gray-300 mb-4 text-sm md:text-base">Stay tuned for more innovative projects coming soon!</p>
                    <div class="flex flex-wrap gap-2 mt-auto">
                        <span class="skill-badge px-3 py-1 bg-gray-700 bg-opacity-70 rounded-full text-xs md:text-sm">Coming Soon</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="skills" class="py-24 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
        <h2 class="text-4xl font-bold mb-12 text-center text-gradient">Skills & Programs</h2>

        <div id="skill-filters" class="flex flex-wrap justify-center gap-3 mb-10">
            <button class="skill-filter active px-4 py-2 rounded-full text-sm font-medium" data-filter="all">All</button>
            <button class="skill-filter px-4 py-2 rounded-full text-sm font-medium" data-filter="hardware">Hardware</button>
            <button class="skill-filter px-4 py-2 rounded-full text-sm font-medium" data-filter="software">Software</button>
            <button class="skill-filter px-4 py-2 rounded-full text-sm font-medium" data-filter="design">Design</button>
            <button class="skill-filter px-4 py-2 rounded-full text-sm font-medium" data-filter="engineering">Engineering</button>
        </div>

        <div class="skills-list flex flex-wrap justify-center gap-4">
             <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-red-500 text-white" data-category="hardware">PCB Design</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-red-500 text-white" data-category="hardware">Electric Motor Construction</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">Ansys</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">Fusion 360 (Eagle)</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">KiCAD</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-yellow-500 text-gray-900" data-category="engineering">Electrical Systems Design</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-yellow-500 text-gray-900" data-category="engineering">Prototype Creation</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-yellow-500 text-gray-900" data-category="engineering">Quality Control</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-yellow-500 text-gray-900" data-category="engineering">RF Simulations</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">IoT Development</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">Automation</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-blue-500 text-white" data-category="design">Mechanical Design</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-blue-500 text-white" data-category="design">CAD</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-blue-500 text-white" data-category="design">UI/UX Design</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">Figma</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">HTML</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">CSS</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">JavaScript</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">Expo Framework</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-cyan-600 text-white" data-category="software">AI Integration</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-yellow-500 text-gray-900" data-category="engineering">Usability Testing</span>
            <span class="skill-item px-4 py-2 rounded-full text-sm font-semibold opacity-0 transform translate-y-5 bg-yellow-500 text-gray-900" data-category="engineering">Product Commercialization</span>
        </div>

         </section>

    <section id="contact" class="py-24 px-4 sm:px-6 lg:px-8 bg-gray-900 bg-opacity-60">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-4xl font-bold mb-16 text-center text-gradient">Get In Touch</h2>

            <div class="flex justify-center">
                <div class="w-full max-w-lg"> <div class="project-card rounded-xl p-8 h-full">
                        <h3 class="text-2xl font-bold mb-6">Contact Information</h3>

                        <div class="space-y-6">
                            <div class="flex items-start">
                                <div class="text-purple-400 text-xl mt-1 mr-4 flex-shrink-0 w-6 text-center">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium">Email</h4>
                                    <a href="mailto:Joan.llbab@gmail.com" class="text-gray-300 hover:text-purple-300 transition break-all">Joan.llbab@gmail.com</a> </div>
                            </div>

                             <div class="flex items-start">
                                <div class="text-blue-400 text-xl mt-1 mr-4 flex-shrink-0 w-6 text-center">
                                    <i class="fas fa-phone-alt"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium">Phone</h4>
                                    <p class="text-gray-300">+1 (555) 123-4567</p>
                                </div>
                            </div>

                             <div class="flex items-start">
                                <div class="text-green-400 text-xl mt-1 mr-4 flex-shrink-0 w-6 text-center">
                                    <i class="fas fa-map-marker-alt"></i>
                                </div>
                                <div>
                                    <h4 class="font-medium">Location</h4>
                                    <p class="text-gray-300">Portland, OR</p>
                                </div>
                            </div>
                        </div>

                         <div class="mt-10">
                            <h4 class="font-medium mb-4">Connect with me</h4>
                            <div class="flex space-x-4">
                                <a href="https://linkedin.com/in/jllb" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-purple-600 transition">
                                    <i class="fab fa-linkedin-in"></i>
                                </a>
                                <a href="https://github.com/llompi" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-gray-600 transition">
                                     <i class="fab fa-github"></i>
                                </a>
                                </div>
                        </div>
                    </div>
                </div>

                </div>
        </div>
    </section>

    <footer class="py-10 px-4 sm:px-6 lg:px-8 bg-gray-900 bg-opacity-80 mt-12"> <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0 text-center md:text-left">
                    <span class="text-xl font-bold text-gradient">JOAN LLOMPART</span>
                     <p class="text-gray-400 mt-2 text-sm">Innovative electrical engineering solutions.</p>
                </div>

                <div class="flex space-x-6">
                     <a href="#" onclick="openModal('privacy')" class="text-gray-400 hover:text-white transition text-sm">Privacy Policy</a>
                    <a href="#" onclick="openModal('terms')" class="text-gray-400 hover:text-white transition text-sm">Terms of Service</a>
                    <a href="#" onclick="openModal('sitemap')" class="text-gray-400 hover:text-white transition text-sm">Sitemap</a>
                </div>
            </div>

            <div class="mt-10 pt-6 border-t border-gray-800 text-center text-gray-500 text-sm">
                 &copy; 2025 Joan Llompart. All rights reserved. </div>
        </div>
    </footer>

    <div id="project1-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('project1')">&times;</span>
            <h2 class="text-3xl font-bold mb-6 text-gradient">RF Amplifier</h2>

            <div class="carousel">
                <div class="carousel-inner">
                     <div class="carousel-item"><img src="docs/assets/img/Project photos/RFAmp.jpg" alt="RF Amplifier 1"></div>
                    <div class="carousel-item"><img src="docs/assets/img/Project photos/RFAmpPCB.jpg" alt="RF Amplifier PCB"></div>
                    <div class="carousel-item"><img src="docs/assets/img/Project photos/RFAmpProgress.jpg" alt="RF Amplifier Progress"></div>
                     <div class="carousel-item"><img src="docs/assets/img/Project photos/RFAmpSetup.jpg" alt="RF Amplifier Setup"></div>
                     <div class="carousel-item"><img src="docs/assets/img/Project photos/RFPCB.png" alt="RF PCB Layout"></div>
                </div>
                <button class="carousel-control prev" onclick="prevSlide('project1')">&#10094;</button>
                <button class="carousel-control next" onclick="nextSlide('project1')">&#10095;</button>
                <div class="carousel-indicators">
                     <span class="carousel-indicator active" onclick="goToSlide('project1', 0)"></span>
                     <span class="carousel-indicator" onclick="goToSlide('project1', 1)"></span>
                     <span class="carousel-indicator" onclick="goToSlide('project1', 2)"></span>
                     <span class="carousel-indicator" onclick="goToSlide('project1', 3)"></span>
                     <span class="carousel-indicator" onclick="goToSlide('project1', 4)"></span>
                 </div>
            </div>

             <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Project Details</h3>
                    <p class="text-gray-300 text-sm">Designed and built a high-fidelity RF amplifier for communication systems. Focused on achieving specific gain and bandwidth targets while maintaining signal integrity. Involved schematic design, component selection, simulation, PCB layout following RF best practices, assembly, and testing.</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Technologies Used</h3>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>Circuit Simulation (e.g., ADS, SPICE)</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>PCB Design (KiCAD/Fusion 360)</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>RF Testing Equipment (VNA, Spectrum Analyzer)</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>Soldering (SMD & Through-hole)</span></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Key Features</h3>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Target Gain: X dB</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Bandwidth: Y MHz - Z MHz</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Impedance Matching (50 Ohm)</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Low Noise Figure (Optional)</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="project2-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('project2')">&times;</span>
            <h2 class="text-3xl font-bold mb-6 text-gradient">Raspberry Pi Handheld Console</h2>

             <div class="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item"><img src="docs/assets/img/Project photos/RetropieFront.jpg" alt="Handheld Console Front"></div>
                    <div class="carousel-item"><img src="docs/assets/img/Project photos/RetropieBack.jpg" alt="Handheld Console Back"></div>
                    </div>
                <button class="carousel-control prev" onclick="prevSlide('project2')">&#10094;</button>
                <button class="carousel-control next" onclick="nextSlide('project2')">&#10095;</button>
                <div class="carousel-indicators">
                    <span class="carousel-indicator active" onclick="goToSlide('project2', 0)"></span>
                    <span class="carousel-indicator" onclick="goToSlide('project2', 1)"></span>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
                <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Project Details</h3>
                    <p class="text-gray-300 text-sm">A custom-designed and built handheld gaming console powered by a Raspberry Pi. Features integrated controls, display, audio, and power management system in a 3D printed enclosure. Runs retro gaming emulation software (e.g., RetroPie/Lakka).</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Technologies Used</h3>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>Raspberry Pi (Zero/3/4)</span></li>
                         <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>Linux / RetroPie</span></li>
                         <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>Custom PCB (Optional) / Wiring</span></li>
                         <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>CAD (Fusion 360) & 3D Printing</span></li>
                         <li class="flex items-center"><span class="w-2 h-2 bg-purple-400 rounded-full mr-2"></span><span>Power Management (LiPo Battery)</span></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Key Features</h3>
                    <ul class="space-y-2 text-sm">
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Portable Retro Gaming</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Integrated LCD Display</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Full Gaming Controls (D-Pad, Buttons)</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Rechargeable Battery</span></li>
                        <li class="flex items-center"><span class="w-2 h-2 bg-blue-400 rounded-full mr-2"></span><span>Custom Ergonomic Case</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <div id="privacy-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('privacy')">&times;</span>
            <h2 class="text-3xl font-bold mb-6 text-gradient">Privacy Policy</h2>
            <div class="prose text-gray-300 max-w-none text-sm"> <h3 class="text-lg font-bold mb-3 text-purple-300">Information We Collect</h3>
                <p>This website is a static portfolio and does not actively collect personal information unless you choose to contact me directly via the provided email address. Website hosting providers may collect standard anonymous analytics data (like page views and browser types).</p>
                <h3 class="text-lg font-bold mb-3 mt-6 text-purple-300">How We Use Your Information</h3>
                <p>If you contact me via email, your email address and message content will be used solely to respond to your inquiry.</p>
                <h3 class="text-lg font-bold mb-3 mt-6 text-purple-300">Sharing of Information</h3>
                <p>Your information will not be shared with third parties without your explicit consent, except as required by law.</p>
                <h3 class="text-lg font-bold mb-3 mt-6 text-purple-300">Security</h3>
                <p>Reasonable measures are taken to protect any information you provide, but email communication is not inherently secure.</p>
            </div>
        </div>
    </div>

    <div id="terms-modal" class="modal">
         <div class="modal-content">
            <span class="close-modal" onclick="closeModal('terms')">&times;</span>
            <h2 class="text-3xl font-bold mb-6 text-gradient">Terms of Service</h2>
            <div class="prose text-gray-300 max-w-none text-sm">
                <h3 class="text-lg font-bold mb-3 text-purple-300">1. Acceptance of Terms</h3>
                <p>By accessing or using this website, you agree to be bound by these Terms of Service. If you disagree with any part of the terms, then you may not access the website.</p>
                <h3 class="text-lg font-bold mb-3 mt-6 text-purple-300">2. Intellectual Property</h3>
                <p>The content on this website, including text, graphics, logos, and images, is the property of Joan Llompart and protected by copyright laws. You may not reuse content without permission.</p>
                <h3 class="text-lg font-bold mb-3 mt-6 text-purple-300">3. Use License</h3>
                 <p>Permission is granted to temporarily download one copy of the materials (information or software) on this website for personal, non-commercial transitory viewing only. </p>
                <h3 class="text-lg font-bold mb-3 mt-6 text-purple-300">4. Disclaimer</h3>
                <p>The materials on this website are provided on an 'as is' basis. Joan Llompart makes no warranties, expressed or implied, and hereby disclaims and negates all other warranties including, without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights.</p>
                <h3 class="text-lg font-bold mb-3 mt-6 text-purple-300">5. Limitations</h3>
                <p>In no event shall Joan Llompart or suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on this website.</p>
                <h3 class="text-lg font-bold mb-3 mt-6 text-purple-300">6. Modifications</h3>
                 <p>Joan Llompart may revise these terms of service for its website at any time without notice. By using this website you are agreeing to be bound by the then current version of these terms of service.</p>
             </div>
        </div>
    </div>

    <div id="sitemap-modal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('sitemap')">&times;</span>
            <h2 class="text-3xl font-bold mb-6 text-gradient">Site Map</h2>
             <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Navigation</h3>
                    <ul class="space-y-2">
                        <li><a href="#home" class="text-gray-300 hover:text-purple-300 transition" onclick="closeModal('sitemap'); document.getElementById('home').scrollIntoView({behavior: 'smooth'});">Home</a></li>
                        <li><a href="#about" class="text-gray-300 hover:text-purple-300 transition" onclick="closeModal('sitemap'); document.getElementById('about').scrollIntoView({behavior: 'smooth'});">About</a></li>
                        <li><a href="#projects" class="text-gray-300 hover:text-purple-300 transition" onclick="closeModal('sitemap'); document.getElementById('projects').scrollIntoView({behavior: 'smooth'});">Projects</a></li>
                        <li><a href="#skills" class="text-gray-300 hover:text-purple-300 transition" onclick="closeModal('sitemap'); document.getElementById('skills').scrollIntoView({behavior: 'smooth'});">Skills</a></li>
                        <li><a href="#contact" class="text-gray-300 hover:text-purple-300 transition" onclick="closeModal('sitemap'); document.getElementById('contact').scrollIntoView({behavior: 'smooth'});">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Legal</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-purple-300 transition" onclick="openModal('privacy'); closeModal('sitemap')">Privacy Policy</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-purple-300 transition" onclick="openModal('terms'); closeModal('sitemap')">Terms of Service</a></li>
                    </ul>
                </div>
                 <div>
                    <h3 class="text-xl font-bold mb-3 text-purple-300">Connect</h3>
                    <div class="flex space-x-4">
                         <a href="https://linkedin.com/in/jllb" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-purple-600 transition"><i class="fab fa-linkedin-in"></i></a>
                         <a href="https://github.com/llompi" target="_blank" rel="noopener noreferrer" class="w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center hover:bg-gray-600 transition"><i class="fab fa-github"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- Global Variables ---
        let scene, camera, renderer, controls; // For background scene
        let backgroundModels = []; // For floating background geometries

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', () => {
            init3DBackgroundScene();
            initSmoothScrolling();
            initMobileMenu();
            initProjectModel1(); // Initialize the robotic arm model
            setupSkillFiltering(); // Setup listeners for skill filters
            observeSkillsSection(); // Setup Intersection Observer for skills animation
            // NOTE: The Gear System model (initProjectModel2) is NOT included as requested.
            // NOTE: Initialize carousels when modals are opened (see openProjectModal)
        });

        // --- 3D Background Scene ---
        function init3DBackgroundScene() {
            const container = document.getElementById('canvas-container');
            if (!container) return;

            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1a1a2e);
            scene.fog = new THREE.FogExp2(0x1a1a2e, 0.0025); // Slightly denser fog

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 25; // Closer camera

            renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true }); // Enable alpha
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio); // Adjust for screen density
            container.appendChild(renderer.domElement);

            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableZoom = false;
            controls.enablePan = false;
            controls.enableDamping = true; // Smoother rotation
            controls.dampingFactor = 0.03;
            controls.autoRotate = true;
            controls.autoRotateSpeed = 0.3; // Slower rotation

            // Lights
            scene.add(new THREE.AmbientLight(0x404040, 0.6));
            const dirLight = new THREE.DirectionalLight(0xffffff, 0.7);
            dirLight.position.set(5, 5, 5);
            scene.add(dirLight);
            const pointLight1 = new THREE.PointLight(0xfc00ff, 0.8, 80); // Adjusted intensity/distance
            pointLight1.position.set(-10, 10, 10);
            scene.add(pointLight1);
            const pointLight2 = new THREE.PointLight(0x00dbde, 0.8, 80);
            pointLight2.position.set(10, -10, -10);
            scene.add(pointLight2);

            createFloatingGeometries();

            window.addEventListener('resize', onWindowResize);
            animateBackground();
        }

        function createFloatingGeometries() {
             const geometryTypes = [
                () => new THREE.IcosahedronGeometry(2.5, 0), // Smaller size
                () => new THREE.TorusKnotGeometry(2, 0.6, 100, 16), // Smaller size
                () => new THREE.OctahedronGeometry(2.5, 0),
                 () => new THREE.TorusGeometry(2.5, 0.8, 16, 32),
                 () => new THREE.DodecahedronGeometry(2.5, 0),
            ];
            const materials = [
                 new THREE.MeshPhongMaterial({ color: 0x00dbde, shininess: 50, specular: 0x222222, transparent: true, opacity: 0.8 }),
                 new THREE.MeshPhongMaterial({ color: 0xfc00ff, shininess: 50, specular: 0x222222, transparent: true, opacity: 0.8 }),
                 new THREE.MeshPhongMaterial({ color: 0xffffff, shininess: 30, specular: 0x111111, transparent: true, opacity: 0.7 }),
                 new THREE.MeshStandardMaterial({ color: 0x6fa8dc, roughness: 0.4, metalness: 0.1, transparent: true, opacity: 0.75 }) // Example Standard Material
             ];

            for (let i = 0; i < 10; i++) { // Fewer objects
                const geometry = geometryTypes[i % geometryTypes.length]();
                const material = materials[i % materials.length].clone(); // Clone material
                const mesh = new THREE.Mesh(geometry, material);

                const range = 50; // Increased range
                mesh.position.set(
                    (Math.random() - 0.5) * range,
                    (Math.random() - 0.5) * range,
                    (Math.random() - 0.5) * range
                 );
                 mesh.rotation.set(Math.random() * Math.PI, Math.random() * Math.PI, Math.random() * Math.PI);
                const scale = 0.6 + Math.random() * 0.6; // Smaller scale variation
                mesh.scale.set(scale, scale, scale);

                mesh.userData = {
                    rotationSpeed: { x: (Math.random() - 0.5) * 0.005, y: (Math.random() - 0.5) * 0.005 }, // Slower rotation
                     direction: new THREE.Vector3((Math.random()-0.5), (Math.random()-0.5), (Math.random()-0.5)).normalize(),
                     speed: 0.01 + Math.random() * 0.02 // Slower movement
                 };

                scene.add(mesh);
                backgroundModels.push(mesh);
            }
        }

        function onWindowResize() {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
            // Also resize project models if they are visible/initialized
             // Optional: Add resize handling for project1Renderer if needed
             if (project1Renderer && project1Camera && document.getElementById('project-model-1')) {
                 const container = document.getElementById('project-model-1');
                 const width = container.clientWidth;
                 const height = container.clientHeight;
                 project1Camera.aspect = width / height;
                 project1Camera.updateProjectionMatrix();
                 project1Renderer.setSize(width, height);
             }
        }

        function animateBackground() {
            requestAnimationFrame(animateBackground);
             const delta = 0.05; // Simple delta time simulation

             backgroundModels.forEach(model => {
                model.rotation.x += model.userData.rotationSpeed.x;
                model.rotation.y += model.userData.rotationSpeed.y;

                 model.position.addScaledVector(model.userData.direction, model.userData.speed);

                // Simple boundary check
                const boundary = 35;
                if (Math.abs(model.position.x) > boundary || Math.abs(model.position.y) > boundary || Math.abs(model.position.z) > boundary) {
                    // Reflect direction (simple bounce)
                     if(Math.abs(model.position.x) > boundary) model.userData.direction.x *= -1;
                     if(Math.abs(model.position.y) > boundary) model.userData.direction.y *= -1;
                     if(Math.abs(model.position.z) > boundary) model.userData.direction.z *= -1;

                     // Nudge back inside boundary slightly to prevent sticking
                     model.position.clampScalar(-boundary + 1, boundary - 1);
                 }
             });

            controls.update(); // Required if enableDamping or autoRotate=true
            renderer.render(scene, camera);
        }


        // --- Interactive Project Model 1 (Robotic Arm) ---
        let project1Scene, project1Camera, project1Renderer, project1Controls;

        function initProjectModel1() {
            const container = document.getElementById('project-model-1');
            if (!container || container.querySelector('canvas')) return; // Don't re-initialize

            const width = container.clientWidth;
            const height = container.clientHeight;

            project1Scene = new THREE.Scene();
            project1Scene.background = null; // Transparent background

            project1Camera = new THREE.PerspectiveCamera(60, width / height, 0.1, 1000); // Adjusted FOV
            project1Camera.position.set(0, 10, 20); // Adjusted camera position

            project1Renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            project1Renderer.setSize(width, height);
            project1Renderer.setPixelRatio(window.devicePixelRatio);
            container.appendChild(project1Renderer.domElement);

            // Lights
            project1Scene.add(new THREE.AmbientLight(0x666666)); // Softer ambient
            const dirLight = new THREE.DirectionalLight(0xffffff, 0.8);
            dirLight.position.set(5, 10, 7);
            project1Scene.add(dirLight);
            const dirLight2 = new THREE.DirectionalLight(0xffffff, 0.3); // Backlight
            dirLight2.position.set(-5, -5, -7);
            project1Scene.add(dirLight2);


            // Simple robotic arm components
            const baseMat = new THREE.MeshStandardMaterial({ color: 0x444455, metalness: 0.6, roughness: 0.4 });
            const armMat = new THREE.MeshStandardMaterial({ color: 0x777788, metalness: 0.5, roughness: 0.5 });
            const jointMat = new THREE.MeshStandardMaterial({ color: 0xaaaaaa, metalness: 0.7, roughness: 0.3 });
            const gripperMat = new THREE.MeshStandardMaterial({ color: 0x9999aa, metalness: 0.6, roughness: 0.4 });

            const base = new THREE.Mesh(new THREE.CylinderGeometry(3, 3.5, 1.5, 32), baseMat);
            base.position.y = 0.75;
            project1Scene.add(base);

            // Pivot point for arm 1
            const pivot1 = new THREE.Group();
            pivot1.position.y = 1.5; // On top of base
            base.add(pivot1); // Add pivot to base

            const arm1 = new THREE.Mesh(new THREE.BoxGeometry(1.2, 6, 1.2), armMat);
            arm1.position.y = 3; // Center arm vertically relative to pivot
            pivot1.add(arm1);

            const joint = new THREE.Mesh(new THREE.SphereGeometry(1, 32, 32), jointMat);
            joint.position.y = 6; // Position relative to pivot1
            pivot1.add(joint); // Add joint to the same pivot

            // Pivot point for arm 2
            const pivot2 = new THREE.Group();
            pivot2.position.y = 0; // Position relative to joint center
            joint.add(pivot2); // Add pivot to joint

            const arm2 = new THREE.Mesh(new THREE.BoxGeometry(1, 5, 1), armMat);
            arm2.position.y = 2.5; // Center arm vertically relative to pivot2
            pivot2.add(arm2);

            const gripperBase = new THREE.Mesh(new THREE.BoxGeometry(1.5, 0.8, 1.5), jointMat);
            gripperBase.position.y = 5; // Position relative to pivot2
            pivot2.add(gripperBase);

            // Gripper parts (relative to gripperBase)
            const gripper1 = new THREE.Mesh(new THREE.BoxGeometry(0.4, 1.5, 0.3), gripperMat);
            gripper1.position.set(0.5, 0.4, 0); // Positioned to the side
            gripperBase.add(gripper1);

            const gripper2 = new THREE.Mesh(new THREE.BoxGeometry(0.4, 1.5, 0.3), gripperMat);
            gripper2.position.set(-0.5, 0.4, 0); // Positioned to the other side
            gripperBase.add(gripper2);

            // Controls
            project1Controls = new THREE.OrbitControls(project1Camera, project1Renderer.domElement);
            project1Controls.enableDamping = true;
            project1Controls.dampingFactor = 0.05;
            project1Controls.target.set(0, 5, 0); // Aim controls at mid-arm
            project1Controls.update();


            // Store references for animation
            project1Scene.userData.pivot1 = pivot1;
            project1Scene.userData.pivot2 = pivot2;
            project1Scene.userData.gripper1 = gripper1;
            project1Scene.userData.gripper2 = gripper2;
            project1Scene.userData.time = 0;

            animateProject1(); // Start animation loop only for this model
        }

        function animateProject1() {
             if (!project1Scene || !project1Renderer) return; // Stop if disposed

             requestAnimationFrame(animateProject1);

             project1Scene.userData.time += 0.015; // Slightly faster animation

             // Simple animation for the robotic arm pivots and grippers
             project1Scene.userData.pivot1.rotation.y = Math.sin(project1Scene.userData.time * 0.5) * 0.7;
             project1Scene.userData.pivot2.rotation.x = Math.sin(project1Scene.userData.time * 0.7) * 0.5 + 0.2; // Tilt forward slightly
             const gripperMovement = Math.sin(project1Scene.userData.time * 1.5) * 0.2;
             project1Scene.userData.gripper1.position.x = 0.5 + gripperMovement;
             project1Scene.userData.gripper2.position.x = -0.5 - gripperMovement;

             project1Controls.update(); // Required for damping
             project1Renderer.render(project1Scene, project1Camera);
        }

        // --- UI & Interaction ---

        function initSmoothScrolling() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const hrefAttribute = this.getAttribute('href');
                    // Check if it's a real anchor link and not just '#'
                    if (hrefAttribute && hrefAttribute.length > 1 && hrefAttribute.startsWith('#')) {
                        const targetElement = document.querySelector(hrefAttribute);
                        if (targetElement) {
                            e.preventDefault();
                            targetElement.scrollIntoView({
                                behavior: 'smooth'
                            });
                            // Close mobile menu if open after clicking a link
                             const mobileMenu = document.getElementById('mobile-menu');
                             if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                                mobileMenu.classList.add('hidden');
                            }
                        }
                     }
                     // If it's just href="#" or onclick handles it (like modals), allow default/other handlers
                });
            });
        }

        function initMobileMenu() {
            const menuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            if (menuButton && mobileMenu) {
                menuButton.addEventListener('click', () => {
                    mobileMenu.classList.toggle('hidden');
                });
            }
        }

        // Modal functionality
        function openModal(modalId) {
            const modal = document.getElementById(modalId + '-modal');
            if (modal) {
                 modal.style.display = 'block';
                 document.body.style.overflow = 'hidden'; // Prevent background scrolling
                 // Optional: Add fade-in animation class
                 // modal.classList.add('fade-in');
             }
        }

        function closeModal(modalId) {
             const modal = document.getElementById(modalId + '-modal');
             if (modal) {
                 modal.style.display = 'none';
                 document.body.style.overflow = 'auto'; // Restore background scrolling
                 // Optional: Remove animation class if added
                 // modal.classList.remove('fade-in');

                 // Stop carousel auto-play if implemented
             }
        }

        function openProjectModal(projectId) {
            openModal(projectId);
            // Initialize carousel specific to this project modal when it opens
            initCarousel(projectId);
        }

        // Close modal when clicking outside content
        window.addEventListener('click', function(event) {
            const openModals = document.querySelectorAll('.modal');
            openModals.forEach(modal => {
                if (event.target === modal && modal.style.display === 'block') {
                     const modalId = modal.id.replace('-modal', '');
                     closeModal(modalId);
                 }
            });
        });

         // Close modal with Escape key
         window.addEventListener('keydown', function(event) {
             if (event.key === 'Escape') {
                const openModals = document.querySelectorAll('.modal');
                 openModals.forEach(modal => {
                     if (modal.style.display === 'block') {
                         const modalId = modal.id.replace('-modal', '');
                         closeModal(modalId);
                     }
                 });
             }
         });


        // Carousel functionality
        function initCarousel(carouselId) {
            const modal = document.getElementById(`${carouselId}-modal`);
            if (!modal) return;
             const carouselInner = modal.querySelector('.carousel-inner');
             const items = modal.querySelectorAll('.carousel-item');
             const indicators = modal.querySelectorAll('.carousel-indicator');

             if (!carouselInner || items.length === 0) return; // No carousel or items

             let currentIndex = 0;
             const totalItems = items.length;

             // Set initial state if not already set
             if (!carouselInner.dataset.initialized) {
                 carouselInner.style.transform = `translateX(0%)`;
                 indicators.forEach((ind, i) => ind.classList.toggle('active', i === 0));
                 carouselInner.dataset.currentIndex = 0;
                 carouselInner.dataset.initialized = 'true';
             }
        }

        function updateCarousel(carouselId, newIndex) {
            const modal = document.getElementById(`${carouselId}-modal`);
            if (!modal) return;
            const carouselInner = modal.querySelector('.carousel-inner');
            const indicators = modal.querySelectorAll('.carousel-indicator');
            const items = modal.querySelectorAll('.carousel-item');
             if (!carouselInner || items.length === 0) return;

            const totalItems = items.length;
             // Ensure index is within bounds
             newIndex = (newIndex + totalItems) % totalItems;

             carouselInner.style.transform = `translateX(-${newIndex * 100}%)`;
             carouselInner.dataset.currentIndex = newIndex;

            indicators.forEach((indicator, index) => {
                indicator.classList.toggle('active', index === newIndex);
            });
        }

        function prevSlide(carouselId) {
            const modal = document.getElementById(`${carouselId}-modal`);
            if (!modal) return;
            const carouselInner = modal.querySelector('.carousel-inner');
            if (!carouselInner) return;
            let currentIndex = parseInt(carouselInner.dataset.currentIndex || 0);
            updateCarousel(carouselId, currentIndex - 1);
        }

        function nextSlide(carouselId) {
            const modal = document.getElementById(`${carouselId}-modal`);
             if (!modal) return;
            const carouselInner = modal.querySelector('.carousel-inner');
             if (!carouselInner) return;
            let currentIndex = parseInt(carouselInner.dataset.currentIndex || 0);
            updateCarousel(carouselId, currentIndex + 1);
        }

        function goToSlide(carouselId, index) {
            updateCarousel(carouselId, index);
        }

        // --- Skills Section Filtering & Animation (From your original code) ---

        function setupSkillFiltering() {
            const skillFilters = document.querySelectorAll('.skill-filter');
            const skillItems = document.querySelectorAll('.skills-list .skill-item');

            skillFilters.forEach(filter => {
                filter.addEventListener('click', () => {
                    const category = filter.getAttribute('data-filter');

                    // Update active filter button state
                    skillFilters.forEach(f => f.classList.remove('active', 'bg-pink-500', 'border-pink-500')); // Remove specific active styles
                    filter.classList.add('active', 'bg-pink-500', 'border-pink-500'); // Add specific active styles

                    // Filter skill items
                    skillItems.forEach(item => {
                        if (category === 'all' || item.getAttribute('data-category') === category) {
                             // Use timeout to allow CSS transition
                             setTimeout(() => {
                                item.classList.remove('hidden', 'opacity-0', 'scale-80', 'w-0', 'p-0', '-ml-2'); // Remove all hiding styles
                                item.classList.add('opacity-100', 'scale-100'); // Ensure visible styles are set
                            }, 10); // Small delay
                         } else {
                            item.classList.add('hidden', 'opacity-0', 'scale-80', 'w-0', 'p-0', '-ml-2'); // Add all hiding styles
                             item.classList.remove('opacity-100', 'scale-100');
                        }
                    });
                });
            });
        }


        function observeSkillsSection() {
            const skillsSection = document.querySelector('#skills');
            const skillItems = document.querySelectorAll('.skills-list .skill-item');

             if (!skillsSection || skillItems.length === 0) return;

             const skillObserver = new IntersectionObserver((entries, observer) => {
                // Check if the skills section is intersecting
                 if (entries[0].isIntersecting) {
                     skillItems.forEach((item, index) => {
                         // Apply animation with a delay based on index
                         setTimeout(() => {
                            item.style.transitionDelay = `${index * 50}ms`; // Add transition delay inline
                             item.classList.remove('opacity-0', 'translate-y-5');
                            item.classList.add('opacity-100', 'translate-y-0');
                        }, 50); // Base delay before starting animations
                     });
                     // Stop observing once animation is triggered
                    observer.unobserve(skillsSection);
                 }
            }, {
                 threshold: 0.3 // Trigger when 30% of the section is visible
             });

            skillObserver.observe(skillsSection);
        }

    </script>
</body>
</html>
